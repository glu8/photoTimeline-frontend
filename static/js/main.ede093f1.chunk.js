(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,n){e.exports=n(97)},43:function(e,t,n){},45:function(e,t,n){},49:function(e,t,n){},73:function(e,t,n){},75:function(e,t,n){},95:function(e,t,n){},97:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),l=n(33),o=n.n(l),r=(n(43),n(45),n(3)),c=n(0),m=(n(47),n(34)),u=n.n(m),s=(n(49),n(6)),p=n.n(s);function d(e){return i.a.createElement(u.a,{getUploadParams:function(t){var n=t.file,a=(t.meta,new FormData);return a.append("file",n),console.log(n),a.append("timelineID",e.timelineID),{url:"https://phototimeline-backend-spcqltar5a-ue.a.run.app/upload",body:a}},onChangeStatus:function(e,t){var n=e.meta,a=e.file;console.log(t,n,a)},onSubmit:function(e,t){console.log(e.map(function(e){return e.meta})),t.forEach(function(e){return e.remove()})},accept:"image/jpeg,image/jpg"})}function f(){var e=Object(c.p)(),t=Object(a.useState)({}),n=Object(r.a)(t,2),l=n[0],o=n[1];return Object(a.useEffect)(function(){p.a.get("https://phototimeline-backend-spcqltar5a-ue.a.run.app/getOneTimeline/"+e.timelineID).then(function(e){o(e.data.timeline),console.log(e.data.timeline)})},[]),i.a.createElement("div",{className:"UploadImageContainer"},i.a.createElement("h2",null,l.name),i.a.createElement("h3",null,"Upload Files"),i.a.createElement("p",null,"Please only upload JPEGs (.jpeg or .jpg) of maximum 500 KB file size."),i.a.createElement(d,{timelineID:e.timelineID}),i.a.createElement("button",{style:{margin:10},onClick:function(){p.a.get("https://phototimeline-backend-spcqltar5a-ue.a.run.app/generateTimelineGroups/"+e.timelineID).then(function(e){console.log(e.status)})}},"Generate Timeline"))}var g=n(35);n(73);function h(e){function t(e){var t=e.split(/\D/);return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])}var n,l=t(e.imageGroup.startDateTime),o=t(e.imageGroup.endDateTime),c=l.toDateString(),m=o.toDateString(),u=l.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),s=o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),p=Object(a.useState)(e.imageGroup),d=Object(r.a)(p,2),f=d[0],h=(d[1],Object(a.useRef)(null)),E=null,b=null,v=function(t){t.forEach(function(t){var n=t.boundingClientRect.y,a=t.intersectionRatio,i=t.isIntersecting;n<E&&i?(console.log(f,E,n,b,a),a<=b&&a<.5&&e.nextGroup&&e.setMapView(e.nextGroup.latitude,e.nextGroup.longitude)):null!=E&&n>E&&i&&a>=b&&a>.5&&e.setMapView(e.imageGroup.latitude,e.imageGroup.longitude),E=n,b=a})},w={root:null,rootMargin:"0px",threshold:(n=100,Array(n+1).fill(0).map(function(e,t){return t/n||0}))};return Object(a.useEffect)(function(){var e=new IntersectionObserver(v,w);return h.current&&e.observe(h.current),function(){h.current&&e.unobserve(h.current)}},[h,w]),i.a.createElement("div",{className:"TimelineItemWrapper",ref:h},i.a.createElement("div",{className:"TimelineItem",style:{padding:"20px"},key:f.sequence,ref:function(t){e.itemsRef.current[e.index]=t}},i.a.createElement("h3",null,i.a.createElement("a",{style:{color:"black",cursor:"pointer"},onClick:function(){e.setMapView(f.latitude,f.longitude)}},f.sequence+1," / ",f.location)),i.a.createElement("p",null,u,", ",c,e.imageGroup.startDateTime===e.imageGroup.endDateTime?"":"-"+s+", "+m),i.a.createElement("div",{className:"PhotoGrid"},f.images.map(function(e){return i.a.createElement("div",{className:"PhotoItem"},i.a.createElement(g.a,{small:"https://phototimeline-backend-spcqltar5a-ue.a.run.app/image/"+e,large:"https://phototimeline-backend-spcqltar5a-ue.a.run.app/image/"+e}))}))))}function E(e){var t=e.timelineData;return i.a.createElement("div",{className:"TimelineContainer",style:{position:"absolute",right:0,top:0,width:"100%",height:"100%",overflowY:"scroll"},ref:e.timelineRef},t.map(function(n,a){return a>0&&a<t.length-1?i.a.createElement(h,{imageGroup:n,setMapView:e.setMapView,itemsRef:e.itemsRef,index:a,key:a,timelineRef:e.timelineRef,prevGroup:t[a-1],nextGroup:t[a+1]}):0===a?i.a.createElement(h,{imageGroup:n,setMapView:e.setMapView,itemsRef:e.itemsRef,index:a,key:a,timelineRef:e.timelineRef,nextGroup:t[a+1],prevGroup:t[a-1]}):i.a.createElement(h,{imageGroup:n,setMapView:e.setMapView,itemsRef:e.itemsRef,index:a,key:a,timelineRef:e.timelineRef,prevGroup:t[a-1]})}))}n(75);var b=n(20);var v=Object(b.GoogleApiWrapper)({apiKey:"AIzaSyCQQQZKC99E52XiY4bd1eZI_VOG2RFqsJ8"})(function(e){var t={lat:e.timelineData[0].latitude,lng:e.timelineData[0].longitude};return Object(a.useEffect)(function(){e.setCoordinates(t)},[]),i.a.createElement(b.Map,{google:e.google,onChange:function(t){var n=t.center,a=t.zoom;e.setCoordinates(n),e.setZoom(a)},zoom:e.zoom,style:{width:"100%",height:"100%"},initialCenter:e.coordinates,center:e.coordinates,streetViewControl:!1,fullscreenControl:!1,options:{styles:[{stylers:[{saturation:50},{gamma:.5}]}]}},e.timelineData.map(function(t,n){return t.imageMetadata.map(function(t,a){return console.log(t),i.a.createElement(b.Marker,{key:t._id+"_marker",id:t._id+"_marker",position:{lat:t.latitude,lng:t.longitude},onClick:function(){e.setCoordinates({lat:t.latitude,lng:t.longitude}),e.setZoom(e.standardZoom),e.scrollTimelineItemIntoView(n)},style:{backgroundColor:"blue"}})})}))});function w(e){var t=12,n=Object(a.useState)([]),l=Object(r.a)(n,2),o=l[0],c=l[1],m=Object(a.useState)({lat:37.7,lng:122.41}),u=Object(r.a)(m,2),s=u[0],d=u[1],f=Object(a.useState)(t),g=Object(r.a)(f,2),h=g[0],b=g[1],w=Object(a.useRef)([]),y=Object(a.useRef)({}),j=Object(a.useState)(0),O=Object(r.a)(j,2);O[0],O[1];return Object(a.useEffect)(function(){var t;t=e.params.timelineID,console.log("timelineID",t),p()({method:"GET",url:"https://phototimeline-backend-spcqltar5a-ue.a.run.app/timelineData/"+t}).then(function(e){var t=e.data;c(t.imageGroupList)}).catch(function(e){console.log(e)})},[]),i.a.createElement("div",{style:{height:"100%",width:"100%",position:"relative",overflow:"hidden"}},0===o.length?i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("h1",null,"Generating timeline... (this can take a minute. Make sure that images have been uploaded for this timeline.)")):i.a.createElement("div",null,i.a.createElement("div",{style:{position:"absolute",left:0,top:0,height:"100%",width:"45%"}},i.a.createElement(v,{timelineData:o,zoom:h,coordinates:s,setCoordinates:d,setZoom:b,scrollTimelineItemIntoView:function(e){w.current[e].scrollIntoView()}})),i.a.createElement("div",{style:{position:"absolute",right:0,top:0,width:"55%",height:"100%"}},i.a.createElement(E,{timelineData:o,setMapView:function(e,n){d({lat:e,lng:n}),b(t)},timelineRef:y,itemsRef:w,class:"Timeline"}))))}var y=function(e){var t=Object(c.p)();return i.a.createElement(w,Object.assign({},e,{params:t}))},j=n(5);function O(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],l=t[1];function o(e){var t=e.split(/\D/);return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])}return Object(a.useEffect)(function(){p()({method:"GET",url:"https://phototimeline-backend-spcqltar5a-ue.a.run.app/timelines"}).then(function(e){var t=e.data;console.log(e.data),l(t.timelineList)}).catch(function(e){console.log(e)})},[]),i.a.createElement("div",{style:{"text-align":"center",height:"100%",width:"100%",position:"relative",overflow:"hidden"}},i.a.createElement("h2",null,"Photo Timeline List"),n.map(function(e){var t=o(e.startDateTime),n=o(e.endDateTime);return i.a.createElement("div",{className:"timelineListItem",key:e._id},i.a.createElement("h3",{style:{padding:"20px"}},i.a.createElement(j.b,{to:"/photoTimeline/"+e._id,style:{color:"black"}},e.name," >")),i.a.createElement("p",null,"Start: ",t.toDateString(),", ",t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),i.a.createElement("p",null,"End: ",n.toDateString(),", ",n.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})))}))}function T(){var e=function(){var e=Object(a.useState)(""),t=Object(r.a)(e,2),n=t[0],l=t[1];return[n,i.a.createElement("input",{value:n,onChange:function(e){return l(e.target.value)},type:"text"})]}(),t=Object(r.a)(e,2),n=t[0],l=t[1],o=Object(a.useState)([]),c=Object(r.a)(o,2),m=c[0],u=c[1];function s(){p()({method:"GET",url:"https://phototimeline-backend-spcqltar5a-ue.a.run.app/timelines"}).then(function(e){var t=e.data;console.log(e.data),u(t.timelineList)}).catch(function(e){console.log(e)})}return Object(a.useEffect)(function(){s()},[]),i.a.createElement("div",{style:{"text-align":"center",height:"100%",width:"100%",position:"relative",overflow:"hidden"}},i.a.createElement("div",{style:{padding:"20px"}},i.a.createElement("h2",null,"Enter Timeline Name to add"),l,i.a.createElement("button",{onClick:function(){console.log(n),p.a.post("https://phototimeline-backend-spcqltar5a-ue.a.run.app/newTimelinePost",{name:n}),s(),window.location.reload(!1)}}," Submit")),i.a.createElement("h1",null,"Existing Timelines"),m.map(function(e){return i.a.createElement("div",{className:"timelineListItem",key:e._id},i.a.createElement("h3",{style:{padding:"20px"}},i.a.createElement(j.b,{to:"/upload/"+e._id,style:{color:"black"}},e.name," > ")))}))}n(95);function k(){return i.a.createElement("div",{className:"NavBar"},i.a.createElement("ul",{id:"NavList"},i.a.createElement("li",null," ",i.a.createElement("p",null,i.a.createElement(j.b,{className:"Link",to:"/timelineList/"},"View Timelines"))),i.a.createElement("li",null,i.a.createElement("p",null,i.a.createElement(j.b,{className:"Link",to:"/timelineEditList/"},"Edit Timelines")))))}var D=function(){return i.a.createElement(j.a,{basename:"geoffreylu.com/photoTimeline-frontend"},i.a.createElement("div",{className:"App",style:{position:"fixed",height:"100%",width:"100%"}},i.a.createElement(k,null),i.a.createElement("div",{className:"PhotoTrailWrapper",style:{position:"fixed",height:"96%",width:"100%",bottom:0}},i.a.createElement(c.d,null,i.a.createElement(c.b,{path:"/photoTimeline/:timelineID",element:i.a.createElement(y,null)}),i.a.createElement(c.b,{path:"/upload/:timelineID",element:i.a.createElement(f,null)}),i.a.createElement(c.b,{path:"/timelineList",element:i.a.createElement(O,null)}),i.a.createElement(c.b,{path:"/timelineEditList",element:i.a.createElement(T,null)}),i.a.createElement(c.b,{path:"*",element:i.a.createElement(c.a,{to:"/timelineList",replace:!0})})))))},G=function(e){e&&e instanceof Function&&n.e(1).then(n.bind(null,98)).then(function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,l=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),l(e),o(e)})};o.a.createRoot(document.getElementById("root")).render(i.a.createElement(D,null)),G()}},[[36,3,2]]]);
//# sourceMappingURL=main.ede093f1.chunk.js.map